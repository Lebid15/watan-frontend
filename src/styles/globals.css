@tailwind base;
@tailwind components;
@tailwind utilities;

/* ================== جذور الألوان لكل الثيمات ================== */

/* الوضع الفاتح الافتراضي */
:root {
  --color-bg-base: 255 255 255;
  --color-bg-surface: 255 255 255;
  --color-bg-surface-alt: 248 249 250;

  --color-text-primary: 17 24 39;
  --color-text-secondary: 107 114 128;

  --color-border: 229 231 235;

  --color-primary: 230 175 46;
  --color-primary-hover: 209 158 41;
  --color-primary-active: 187 142 38;
  --color-primary-contrast: 255 255 255;

  --color-success: 34 197 94;
  --color-warning: 245 158 11;
  --color-danger: 239 68 68;

  /* ✅ تم تعديلها لتناسب المود الأبيض */
  --color-bg-input: 255 255 255;
}

/* Dark 1 */
:root[data-theme="dark1"] {
  --color-bg-base: 17 24 39;
  --color-bg-surface: 31 41 55;
  --color-bg-surface-alt: 55 65 81;

  --color-text-primary: 255 255 255;
  --color-text-secondary: 209 213 219;

  --color-border: 75 85 99;

  --color-primary: 230 175 46;
  --color-primary-hover: 209 158 41;
  --color-primary-active: 187 142 38;
  --color-primary-contrast: 0 0 0;

  --color-success: 34 197 94;
  --color-warning: 245 158 11;
  --color-danger: 239 68 68;

  --color-bg-input: 34 37 46;
}

/* Dark 2 */
:root[data-theme="dark2"] {
  --color-bg-base: 15 23 42;
  --color-bg-surface: 30 41 59;
  --color-bg-surface-alt: 51 65 85;

  --color-text-primary: 255 255 255;
  --color-text-secondary: 203 213 225;

  --color-border: 71 85 105;

  --color-primary: 230 175 46;
  --color-primary-hover: 209 158 41;
  --color-primary-active: 187 142 38;
  --color-primary-contrast: 0 0 0;

  --color-success: 34 197 94;
  --color-warning: 245 158 11;
  --color-danger: 239 68 68;

  --color-bg-input: 34 37 46;
}

/* Dark 3 */
:root[data-theme="dark3"] {
  --color-bg-base: 0 0 0;
  --color-bg-surface: 24 24 27;
  --color-bg-surface-alt: 39 39 42;

  --color-text-primary: 255 255 255;
  --color-text-secondary: 212 212 216;

  --color-border: 63 63 70;

  --color-primary: 230 175 46;
  --color-primary-hover: 209 158 41;
  --color-primary-active: 187 142 38;
  --color-primary-contrast: 0 0 0;

  --color-success: 34 197 94;
  --color-warning: 245 158 11;
  --color-danger: 239 68 68;

  --color-bg-input: 34 37 46;
}

/* ================== ألوان Tailwind مخصصة ================== */
@layer base {
  body {
    @apply bg-[rgb(var(--color-bg-base))] text-[rgb(var(--color-text-primary))];
  }
}

/* ================== Dark Shims ================== */
:root[data-theme="dark1"] .text-gray-700,
:root[data-theme="dark2"] .text-gray-700,
:root[data-theme="dark3"] .text-gray-700 { color: rgb(var(--color-text-primary)) !important; }

:root[data-theme="dark1"] .text-gray-500,
:root[data-theme="dark2"] .text-gray-500,
:root[data-theme="dark3"] .text-gray-500 { color: rgb(var(--color-text-secondary)) !important; }

:root[data-theme="dark1"] .border-gray-200,
:root[data-theme="dark2"] .border-gray-200,
:root[data-theme="dark3"] .border-gray-200 { border-color: rgb(var(--color-border)) !important; }

:root[data-theme="dark1"] .bg-gray-50,
:root[data-theme="dark2"] .bg-gray-50,
:root[data-theme="dark3"] .bg-gray-50 { background-color: rgb(var(--color-bg-surface-alt)) !important; }

:root[data-theme="dark1"] .shadow,
:root[data-theme="dark2"] .shadow,
:root[data-theme="dark3"] .shadow { box-shadow: 0 1px 2px rgba(0,0,0,.25), 0 4px 10px rgba(0,0,0,.18) !important; }

/* ================== Components ================== */
@layer components {
  /* بطاقات */
  .card {
    @apply bg-[rgb(var(--color-bg-surface))] border border-[rgb(var(--color-border))] rounded-xl;
  }

  /* إدخالات */
  .input {
    /* ✅ أصبحت تستخدم bg-input حتى تتبدّل حسب الثيم */
    @apply bg-[rgb(var(--color-bg-input))] text-[rgb(var(--color-text-primary))] border border-[rgb(var(--color-border))] rounded-md px-3 py-2 outline-none;
  }
  .input::placeholder { color: rgb(var(--color-text-secondary)); }
  .input:focus {
    @apply border-[rgb(var(--color-primary))];
    box-shadow: 0 0 0 3px rgba(var(--color-primary) / .18);
  }
  .input:disabled {
    opacity: .7;
    cursor: not-allowed;
  }

  /* أزرار */
  .btn {
    @apply inline-flex items-center justify-center gap-2 rounded-md px-3 py-2 font-medium transition;
    border: 1px solid rgba(var(--color-border) / 1);
  }

  .btn-primary {
    background-color: rgb(var(--color-primary));
    color: rgb(var(--color-primary-contrast));
    border-color: rgba(var(--color-primary) / .4);
  }
  .btn-primary:hover { background-color: rgb(var(--color-primary-hover)); }
  .btn-primary:active { background-color: rgb(var(--color-primary-active)); }

  .btn-secondary {
    @apply bg-[rgb(var(--color-bg-surface))] text-[rgb(var(--color-text-primary))];
  }
  .btn-secondary:hover { background-color: rgba(var(--color-primary) / .08); }

  .btn-ghost {
    @apply bg-transparent text-[rgb(var(--color-text-primary))];
    border-color: transparent;
  }
  .btn-ghost:hover { background-color: rgba(var(--color-primary) / .08); }

  /* شارات */
  .badge { @apply inline-flex items-center gap-2 rounded-full px-2 py-1 text-xs; }
  .badge-success { background-color: rgba(var(--color-success) / .15); color: rgb(var(--color-success)); }
  .badge-warning { background-color: rgba(var(--color-warning) / .15); color: rgb(var(--color-warning)); }
  .badge-danger  { background-color: rgba(var(--color-danger)  / .15); color: rgb(var(--color-danger));  }

  /* جداول */
  .table-wrap { @apply overflow-auto rounded-lg border border-[rgb(var(--color-border))]; }
  .table {
    @apply min-w-full text-sm;
  }
  .table thead { @apply bg-[rgb(var(--color-bg-surface-alt))] text-[rgb(var(--color-text-primary))]; }
  .table thead tr { @apply border-b border-[rgb(var(--color-border))]; }
  .table thead th { @apply px-3 py-2 font-semibold text-right; }

  .table tbody { @apply divide-y divide-[rgb(var(--color-border))]; }
  .table tbody tr:nth-child(odd) { @apply bg-[rgb(var(--color-bg-surface))]; }
  .table tbody tr:nth-child(even){ @apply bg-[rgb(var(--color-bg-surface))]; }
  .table tbody td { @apply px-3 py-2 align-middle; }

  /* قوائم منسدلة عامة (تستخدمها الـ Dropdowns) */
  .menu {
    background-color: rgb(var(--color-bg-surface));
    border: 1px solid rgb(var(--color-border));
    border-radius: 0.5rem;
    box-shadow: 0 10px 15px rgba(0,0,0,.10), 0 4px 6px rgba(0,0,0,.05);
  }
}
